// Generated by Haxe 4.1.1
(function ($global) { "use strict";
var FocusManager = function() { };
FocusManager.focus = function(container) {
	FocusManager.focusedItem = container.parent;
};
var Main = function() { };
Main.main = function() {
	var currentWindow = electron_renderer_Remote.getCurrentWindow();
	currentWindow.setMenu(MenuBuilder.build());
	electron_renderer_IpcRenderer.on("init",Main.init);
};
Main.init = function(event,fileNames) {
	window.$ = window.jQuery = require("jquery");
	var GoldenLayout = require("golden-layout");
	var _g = [];
	var _g1 = 0;
	while(_g1 < fileNames.length) {
		var fileName = fileNames[_g1];
		++_g1;
		_g.push(Main.createFileContent(fileName));
	}
	var contents = _g;
	var config = { settings : { showPopoutIcon : false, showMaximiseIcon : false}, content : [{ type : "stack", content : contents}]};
	Main.goldenLayout = new GoldenLayout(config);
	Main.goldenLayout.registerComponent("file",Main.openFile);
	Main.goldenLayout.init();
};
Main.openFile = function(container,componentState) {
	var element = container.getElement().get(0);
	element.tabIndex = 0;
	var container1 = container;
	container.on("show",function() {
		FocusManager.focus(container1);
	});
	var container2 = container;
	element.addEventListener("focus",function() {
		FocusManager.focus(container2);
	});
};
Main.createFileContent = function(path) {
	var tmp = "file_" + Std.random(134217727);
	var tmp1 = js_node_Path.basename(path);
	return { type : "component", componentName : "file", componentState : { path : path}, id : tmp, title : tmp1};
};
var MenuBuilder = function() { };
MenuBuilder.build = function() {
	var template = [{ label : "&File", submenu : [{ label : "&Open", accelerator : "CommandOrControl+O"},{ label : "&Export", accelerator : "CommandOrControl+E"}]},{ label : "&View", submenu : [{ label : "&Close Tab", accelerator : "CommandOrControl+W", click : TabOperation.close},{ label : "Close &Other Tabs", accelerator : "CommandOrControl+Shift+W", click : TabOperation.closeOthers},{ label : "Close &All Tabs", accelerator : "CommandOrControl+Alt+W", click : TabOperation.closeAll}]},{ label : "&Help", submenu : [{ label : "&Toggle Developer Tools", accelerator : "F12", click : function(item,focusedWindow) {
		if(focusedWindow != null) {
			focusedWindow.webContents.toggleDevTools();
		}
	}}]}];
	var menu = electron_renderer_Remote.Menu.buildFromTemplate(template);
	return menu;
};
var Std = function() { };
Std.random = function(x) {
	if(x <= 0) {
		return 0;
	} else {
		return Math.floor(Math.random() * x);
	}
};
var TabOperation = function() { };
TabOperation.close = function() {
	var item = FocusManager.focusedItem;
	if(item == null) {
		return;
	}
	if(item.isComponent) {
		item.remove();
	}
};
TabOperation.closeOthers = function() {
	var item = FocusManager.focusedItem;
	if(item == null) {
		return;
	}
	if(item.parent == null || !item.parent.isStack) {
		return;
	}
	var _g = 0;
	var _g1 = item.parent.contentItems;
	while(_g < _g1.length) {
		var i = _g1[_g];
		++_g;
		if(i.isComponent && i != item) {
			i.remove();
		}
	}
};
TabOperation.closeAll = function() {
	TabOperation.closeOthers();
	TabOperation.close();
};
var electron_renderer_IpcRenderer = require("electron").ipcRenderer;
var electron_renderer_Remote = require("electron").remote;
var haxe_iterators_ArrayIterator = function(array) {
	this.current = 0;
	this.array = array;
};
haxe_iterators_ArrayIterator.prototype = {
	hasNext: function() {
		return this.current < this.array.length;
	}
	,next: function() {
		return this.array[this.current++];
	}
};
var js_jquery_JqEltsIterator = function(j) {
	this.i = 0;
	this.j = j;
};
js_jquery_JqEltsIterator.prototype = {
	hasNext: function() {
		return this.i < this.j.length;
	}
	,next: function() {
		return $(this.j[this.i++]);
	}
};
var js_jquery_JqIterator = function(j) {
	this.i = 0;
	this.j = j;
};
js_jquery_JqIterator.prototype = {
	hasNext: function() {
		return this.i < this.j.length;
	}
	,next: function() {
		return this.j[this.i++];
	}
};
var js_node_KeyValue = {};
js_node_KeyValue.get_key = function(this1) {
	return this1[0];
};
js_node_KeyValue.get_value = function(this1) {
	return this1[1];
};
var js_node_Path = require("path");
var js_node_stream_WritableNewOptionsAdapter = {};
js_node_stream_WritableNewOptionsAdapter.from = function(options) {
	if(!Object.prototype.hasOwnProperty.call(options,"final")) {
		Object.defineProperty(options,"final",{ get : function() {
			return options.final_;
		}});
	}
	return options;
};
var js_node_url_URLSearchParamsEntry = {};
js_node_url_URLSearchParamsEntry._new = function(name,value) {
	var this1 = [name,value];
	return this1;
};
js_node_url_URLSearchParamsEntry.get_name = function(this1) {
	return this1[0];
};
js_node_url_URLSearchParamsEntry.get_value = function(this1) {
	return this1[1];
};
function $iterator(o) { if( o instanceof Array ) return function() { return new haxe_iterators_ArrayIterator(o); }; return typeof(o.iterator) == 'function' ? $bind(o,o.iterator) : o.iterator; }
var $_;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $global.$haxeUID++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = m.bind(o); o.hx__closures__[m.__id__] = f; } return f; }
$global.$haxeUID |= 0;
var typeofJQuery = typeof($);
if(typeofJQuery != "undefined" && $.fn != null) {
	$.fn.elements = function() {
		return new js_jquery_JqEltsIterator(this);
	};
}
var typeofJQuery = typeof($);
if(typeofJQuery != "undefined" && $.fn != null) {
	$.fn.iterator = function() {
		return new js_jquery_JqIterator(this);
	};
}
Main.main();
})(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
